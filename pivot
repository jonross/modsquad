
pivot() {
    python2.7 -c 'if True:
        import collections as co, modsquad as m, sys
        indexname = sys.argv[1]
        pivot = co.defaultdict(lambda: co.defaultdict(lambda: "NaN"))
        keys = set()
        for row in m.tsv_input():
            keys.add(row[1])
            pivot[row[0]][row[1]] = row[2]
        print "\t".join([indexname] + list(keys))
        for index, dic in pivot.iteritems():
            print "\t".join([index] + [dic[key] for key in keys])
    ' "$1"
}
